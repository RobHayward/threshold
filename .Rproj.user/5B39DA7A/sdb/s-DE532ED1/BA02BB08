{
    "contents" : "##  growth.R\n## \n##  Performs empirical work reported in\n## \n##  \"Sample Splitting and Threshold Estimation\"\n## \n##  Written by\n## \n##  Bruce E. Hansen\n##  Department of Economics\n##  Social Science Building\n##  University of Wisconsin\n##  Madison, WI 53706-1393\n##  behansen@wisc.edu\n##  http://www.ssc.wisc.edu/~bhansen/\n\n# Load procedures and data #                  \n\nsource(\"Extract/thr_est.R\")\nsource(\"Extract/thr_het.R\")\ndata <- read.table(\"Extract/dur_john.dat\")\n\n# Exclude missing variables and oil states #\n\nk <- ncol(data)\nindx <- as.matrix(1-(data[,5]== -999))%*%matrix(c(1),1,k)\ndata <- as.matrix(data[indx>0])\ndata <- matrix(data,nrow=nrow(data)/k,ncol=k)\nindx <- as.matrix(1-(data[,6]== -999))%*%matrix(c(1),1,k)\ndata <- as.matrix(data[indx>0])\ndata <- matrix(data,nrow=nrow(data)/k,ncol=k)\nindx <- as.matrix(1-(data[,10]== -999))%*%matrix(c(1),1,k)\ndata <- as.matrix(data[indx>0])\ndata <- matrix(data,nrow=nrow(data)/k,ncol=k)\nindx <- as.matrix(1-(data[,11]== -999))%*%matrix(c(1),1,k)\ndata <- as.matrix(data[indx>0])\ndata <- matrix(data,nrow=nrow(data)/k,ncol=k)\nindx <- as.matrix(data[,2]== 1)%*%matrix(c(1),1,k)\ndata <- as.matrix(data[indx>0])\ndata <- matrix(data,nrow=nrow(data)/k,ncol=k)\n\n# Make data transformations #\n\ndiff <- log(data[,6])-log(data[,5])\nq <- data[,5]\ngdp60 <- log(q)\niony <- log(data[,9]/100)\npgro <- log(data[,8]/100+.05)\nsch <- log((data[,10])/100)\nlit <- data[,11]\ndat <- cbind(diff,gdp60,iony,pgro,sch,q,lit)\n\n# Program switches #                         \n\nrep <- 1000\nh   <- 1\nna  <- rbind(\"GNP_Gwth\",\"GDP_1960\",\"Inv/GDP\",\"Pop_Gwth\",\"School\",\"GDP_1960\",\"Literacy\")\ndum <- rbind(2,3,4,5)\n\nfor (j in 1:1){\ncat (\"Testing for a First Sample Split, Using Output\", \"\\n\")\ncat (\"\\n\")\nout <- thr_het(dat,1,dum,6,0.15,rep);\ncat (\"\\n\")\ncat (\"\\n\")\ncat (\"Testing for a First Sample Split, Using Literacy Rate\", \"\\n\")\ncat (\"\\n\")\nout <- thr_het(dat,1,dum,7,0.15,rep);\n\n# Estimate First Sample Split, Using Output as Threshold #\n\nqhat1 <- thr_est(dat,na,1,dum,6,h)\n\n\n# Second Level #\n\nk <- ncol(dat)\nindx <- as.matrix((q > qhat1)%*%matrix(c(1),1,k))\ndati <- as.matrix(dat[indx>0])\ndati <- matrix(dati,nrow=nrow(dati)/k,ncol=k)\ncat (\"Sub-Sample, Incomes over 863\", \"\\n\")\ncat (\"Testing for a Second Sample Split, Using Output\", \"\\n\")\ncat (\"\\n\")\nout <- thr_het(dati,1,dum,6,0.15,rep)\ncat (\"\\n\")\ncat (\"\\n\")\ncat (\"Testing for a Second Sample Split, Using Literacy Rate\", \"\\n\")\ncat (\"\\n\")\nout <- thr_het(dati,1,dum,7,0.15,rep)\ncat (\"\\n\")\ncat (\"\\n\")\n\n# Estimate Second Sample Split, Using Literacy Rate as Threshold #\n\nqhat2 <- thr_est(dati,na,1,dum,7,h)\n\n\n# Third Level #\n\ni1 <- ((lit <= qhat2)%*%matrix(c(1),1,k))*indx\ni2 <- ((lit >  qhat2)%*%matrix(c(1),1,k))*indx\ndat1 <- as.matrix(dat[i1>0])\ndat1 <- matrix(dat1,nrow=nrow(dat1)/k,ncol=k)\ndat2 <- as.matrix(dat[i2>0])\ndat2 <- matrix(dat2,nrow=nrow(dat2)/k,ncol=k)\ncat (\"Sub-Sample, Incomes over 863, Literacy Under 45\", \"\\n\")\ncat (\"Testing for a Third Sample Split, Using Output\", \"\\n\")\ncat (\"\\n\")\nout <- thr_het(dat1,1,dum,6,0.15,rep)\ncat (\"\\n\")\ncat (\"\\n\")\ncat (\"Testing for a Third Sample Split, Using Literacy Rate\", \"\\n\")\ncat (\"\\n\")\nout <- thr_het(dat1,1,dum,7,0.15,rep)\ncat (\"\\n\")\ncat (\"\\n\")\ncat (\"Sub-Sample, Incomes over 863, Literacy Over 45\", \"\\n\")\ncat (\"Testing for a Third Sample Split, Using Output\", \"\\n\")\ncat (\"\\n\")\nout <- thr_het(dat2,1,dum,6,0.15,rep)\ncat (\"\\n\")\ncat (\"\\n\")\ncat (\"Testing for a Third Sample Split, Using Literacy Rate\", \"\\n\")\ncat (\"\\n\")\nout <- thr_het(dat2,1,dum,7,0.15,rep)\ncat (\"\\n\")\ncat (\"\\n\")\n\n}\nsave.image(file = \"growthout.RData\")\n\n\n",
    "created" : 1410264941588.000,
    "dirty" : false,
    "encoding" : "ISO8859-1",
    "folds" : "",
    "hash" : "1460391572",
    "id" : "BA02BB08",
    "lastKnownWriteTime" : 1410265418,
    "path" : "C:/Users/rh49/Projects/threshold/Extract/growth.R",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}